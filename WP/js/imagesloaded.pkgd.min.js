!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o];n&&n[r]&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,i){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("ev-emitter")):t.imagesLoaded=i(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function o(e,t){for(var i in t)e[i]=t[i];return e}function r(e,t,i){if(!(this instanceof r))return new r(e,t,i);var n=e;return"string"==typeof e&&(n=document.querySelectorAll(e)),n?(this.elements=function(e){return Array.isArray(e)?e:"object"==typeof e&&"number"==typeof e.length?a.call(e):[e]}(n),this.options=o({},this.options),"function"==typeof t?i=t:o(this.options,t),i&&this.on("always",i),this.getImages(),s&&(this.jqDeferred=new s.Deferred),void setTimeout(this.check.bind(this))):void h.error("Bad element for imagesLoaded "+(n||e))}function i(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}var s=t.jQuery,h=t.console,a=Array.prototype.slice;(r.prototype=Object.create(e.prototype)).options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&d[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return r.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},r.prototype.addImage=function(e){var t=new i(e);this.images.push(t)},r.prototype.addBackground=function(e,t){var i=new n(e,t);this.images.push(i)},r.prototype.check=function(){function t(e,t,i){setTimeout(function(){n.progress(e,t,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},r.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&h&&h.log("progress: "+i,e,t)},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},(i.prototype=Object.create(e.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},r.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((s=e).fn.imagesLoaded=function(e,t){return new r(this,e,t).jqDeferred.promise(s(this))})},r.makeJQueryPlugin(),r});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlc2xvYWRlZC5wa2dkLm1pbi5qcyJdLCJuYW1lcyI6WyJlIiwidCIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJFdkVtaXR0ZXIiLCJ3aW5kb3ciLCJ0aGlzIiwicHJvdG90eXBlIiwib24iLCJpIiwiX2V2ZW50cyIsIm4iLCJpbmRleE9mIiwicHVzaCIsIm9uY2UiLCJfb25jZUV2ZW50cyIsIm9mZiIsImxlbmd0aCIsInNwbGljZSIsImVtaXRFdmVudCIsInNsaWNlIiwibyIsInIiLCJhcHBseSIsImFsbE9mZiIsInJlcXVpcmUiLCJpbWFnZXNMb2FkZWQiLCJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlbWVudHMiLCJBcnJheSIsImlzQXJyYXkiLCJkIiwiY2FsbCIsIm9wdGlvbnMiLCJnZXRJbWFnZXMiLCJoIiwianFEZWZlcnJlZCIsIkRlZmVycmVkIiwic2V0VGltZW91dCIsImNoZWNrIiwiYmluZCIsImEiLCJlcnJvciIsImltZyIsInVybCIsImVsZW1lbnQiLCJJbWFnZSIsImpRdWVyeSIsImNvbnNvbGUiLCJPYmplY3QiLCJjcmVhdGUiLCJpbWFnZXMiLCJmb3JFYWNoIiwiYWRkRWxlbWVudEltYWdlcyIsIm5vZGVOYW1lIiwiYWRkSW1hZ2UiLCJiYWNrZ3JvdW5kIiwiYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMiLCJub2RlVHlwZSIsInUiLCIxIiwiOSIsIjExIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImV4ZWMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhZGRCYWNrZ3JvdW5kIiwicHJvZ3Jlc3MiLCJwcm9ncmVzc2VkQ291bnQiLCJoYXNBbnlCcm9rZW4iLCJjb21wbGV0ZSIsImlzTG9hZGVkIiwibm90aWZ5IiwiZGVidWciLCJsb2ciLCJpc0NvbXBsZXRlIiwiZ2V0SXNJbWFnZUNvbXBsZXRlIiwiY29uZmlybSIsIm5hdHVyYWxXaWR0aCIsInByb3h5SW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwic3JjIiwiaGFuZGxlRXZlbnQiLCJ0eXBlIiwib25sb2FkIiwidW5iaW5kRXZlbnRzIiwib25lcnJvciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtYWtlSlF1ZXJ5UGx1Z2luIiwiZm4iLCJwcm9taXNlIl0sIm1hcHBpbmdzIjoiQ0FNQyxTQUFTQSxFQUFFQyxHQUFHLG1CQUFtQkMsUUFBUUEsT0FBT0MsSUFBSUQsT0FBTyx3QkFBd0JELEdBQUcsaUJBQWlCRyxRQUFRQSxPQUFPQyxRQUFRRCxPQUFPQyxRQUFRSixJQUFJRCxFQUFFTSxVQUFVTCxJQUE3SixDQUFrSyxvQkFBb0JNLE9BQU9BLE9BQU9DLEtBQUssV0FBVyxTQUFTUixLQUFLLElBQUlDLEVBQUVELEVBQUVTLFVBQVUsT0FBT1IsRUFBRVMsR0FBRyxTQUFTVixFQUFFQyxHQUFHLEdBQUdELEdBQUdDLEVBQUUsQ0FBQyxJQUFJVSxFQUFFSCxLQUFLSSxRQUFRSixLQUFLSSxTQUFTLEdBQUdDLEVBQUVGLEVBQUVYLEdBQUdXLEVBQUVYLElBQUksR0FBRyxPQUFzQixHQUFmYSxFQUFFQyxRQUFRYixJQUFRWSxFQUFFRSxLQUFLZCxHQUFHTyxPQUFPUCxFQUFFZSxLQUFLLFNBQVNoQixFQUFFQyxHQUFHLEdBQUdELEdBQUdDLEVBQUUsQ0FBQ08sS0FBS0UsR0FBR1YsRUFBRUMsR0FBRyxJQUFJVSxFQUFFSCxLQUFLUyxZQUFZVCxLQUFLUyxhQUFhLEdBQW1CLE9BQWROLEVBQUVYLEdBQUdXLEVBQUVYLElBQUksSUFBWUMsSUFBRyxFQUFHTyxPQUFPUCxFQUFFaUIsSUFBSSxTQUFTbEIsRUFBRUMsR0FBRyxJQUFJVSxFQUFFSCxLQUFLSSxTQUFTSixLQUFLSSxRQUFRWixHQUFHLEdBQUdXLEdBQUdBLEVBQUVRLE9BQU8sQ0FBQyxJQUFJTixFQUFFRixFQUFFRyxRQUFRYixHQUFHLE9BQVcsR0FBSlksR0FBT0YsRUFBRVMsT0FBT1AsRUFBRSxHQUFHTCxPQUFPUCxFQUFFb0IsVUFBVSxTQUFTckIsRUFBRUMsR0FBRyxJQUFJVSxFQUFFSCxLQUFL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RixNQUFNQSxLQUFLdUMsSUFBSTRDLG9CQUFvQixRQUFRbkYsT0FBT3FCLEVBQUVwQixVQUFVd0UsUUFBUSxTQUFTakYsRUFBRUMsR0FBR08sS0FBS21FLFNBQVMzRSxFQUFFUSxLQUFLYSxVQUFVLFdBQVcsQ0FBQ2IsS0FBS0EsS0FBS3lDLFFBQVFoRCxLQUFLc0IsRUFBRXFFLGlCQUFpQixTQUFTM0YsSUFBR0EsRUFBRUEsR0FBR0QsRUFBRW1ELFdBQVdaLEVBQUV0QyxHQUFJNEYsR0FBR2pFLGFBQWEsU0FBUzVCLEVBQUVDLEdBQXlCLE9BQWhCLElBQUlzQixFQUFFZixLQUFLUixFQUFFQyxHQUFZdUMsV0FBV3NELFFBQVF2RCxFQUFFL0IsVUFBVWUsRUFBRXFFLG1CQUFtQnJFIiwiZmlsZSI6ImltYWdlc2xvYWRlZC5wa2dkLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogaW1hZ2VzTG9hZGVkIFBBQ0tBR0VEIHY0LjEuNFxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuIWZ1bmN0aW9uKGUsdCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPXQoKTplLkV2RW1pdHRlcj10KCl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0Lm9uPWZ1bmN0aW9uKGUsdCl7aWYoZSYmdCl7dmFyIGk9dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sbj1pW2VdPWlbZV18fFtdO3JldHVybiBuLmluZGV4T2YodCk9PS0xJiZuLnB1c2godCksdGhpc319LHQub25jZT1mdW5jdGlvbihlLHQpe2lmKGUmJnQpe3RoaXMub24oZSx0KTt2YXIgaT10aGlzLl9vbmNlRXZlbnRzPXRoaXMuX29uY2VFdmVudHN8fHt9LG49aVtlXT1pW2VdfHx7fTtyZXR1cm4gblt0XT0hMCx0aGlzfX0sdC5vZmY9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1tlXTtpZihpJiZpLmxlbmd0aCl7dmFyIG49aS5pbmRleE9mKHQpO3JldHVybiBuIT0tMSYmaS5zcGxpY2UobiwxKSx0aGlzfX0sdC5lbWl0RXZlbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1tlXTtpZihpJiZpLmxlbmd0aCl7aT1pLnNsaWNlKDApLHQ9dHx8W107Zm9yKHZhciBuPXRoaXMuX29uY2VFdmVudHMmJnRoaXMuX29uY2VFdmVudHNbZV0sbz0wO288aS5sZW5ndGg7bysrKXt2YXIgcj1pW29dLHM9biYmbltyXTtzJiYodGhpcy5vZmYoZSxyKSxkZWxldGUgbltyXSksci5hcHBseSh0aGlzLHQpfXJldHVybiB0aGlzfX0sdC5hbGxPZmY9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5fZXZlbnRzLGRlbGV0ZSB0aGlzLl9vbmNlRXZlbnRzfSxlfSksZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiXSxmdW5jdGlvbihpKXtyZXR1cm4gdChlLGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dChlLHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpKTplLmltYWdlc0xvYWRlZD10KGUsZS5FdkVtaXR0ZXIpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaShlLHQpe2Zvcih2YXIgaSBpbiB0KWVbaV09dFtpXTtyZXR1cm4gZX1mdW5jdGlvbiBuKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7dmFyIHQ9XCJvYmplY3RcIj09dHlwZW9mIGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aDtyZXR1cm4gdD9kLmNhbGwoZSk6W2VdfWZ1bmN0aW9uIG8oZSx0LHIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG8pKXJldHVybiBuZXcgbyhlLHQscik7dmFyIHM9ZTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmKHM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlKSkscz8odGhpcy5lbGVtZW50cz1uKHMpLHRoaXMub3B0aW9ucz1pKHt9LHRoaXMub3B0aW9ucyksXCJmdW5jdGlvblwiPT10eXBlb2YgdD9yPXQ6aSh0aGlzLm9wdGlvbnMsdCksciYmdGhpcy5vbihcImFsd2F5c1wiLHIpLHRoaXMuZ2V0SW1hZ2VzKCksaCYmKHRoaXMuanFEZWZlcnJlZD1uZXcgaC5EZWZlcnJlZCksdm9pZCBzZXRUaW1lb3V0KHRoaXMuY2hlY2suYmluZCh0aGlzKSkpOnZvaWQgYS5lcnJvcihcIkJhZCBlbGVtZW50IGZvciBpbWFnZXNMb2FkZWQgXCIrKHN8fGUpKX1mdW5jdGlvbiByKGUpe3RoaXMuaW1nPWV9ZnVuY3Rpb24gcyhlLHQpe3RoaXMudXJsPWUsdGhpcy5lbGVtZW50PXQsdGhpcy5pbWc9bmV3IEltYWdlfXZhciBoPWUualF1ZXJ5LGE9ZS5jb25zb2xlLGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlO28ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLG8ucHJvdG90eXBlLm9wdGlvbnM9e30sby5wcm90b3R5cGUuZ2V0SW1hZ2VzPWZ1bmN0aW9uKCl7dGhpcy5pbWFnZXM9W10sdGhpcy5lbGVtZW50cy5mb3JFYWNoKHRoaXMuYWRkRWxlbWVudEltYWdlcyx0aGlzKX0sby5wcm90b3R5cGUuYWRkRWxlbWVudEltYWdlcz1mdW5jdGlvbihlKXtcIklNR1wiPT1lLm5vZGVOYW1lJiZ0aGlzLmFkZEltYWdlKGUpLHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kPT09ITAmJnRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMoZSk7dmFyIHQ9ZS5ub2RlVHlwZTtpZih0JiZ1W3RdKXtmb3IodmFyIGk9ZS5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nXCIpLG49MDtuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTt0aGlzLmFkZEltYWdlKG8pfWlmKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCl7dmFyIHI9ZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kKTtmb3Iobj0wO248ci5sZW5ndGg7bisrKXt2YXIgcz1yW25dO3RoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMocyl9fX19O3ZhciB1PXsxOiEwLDk6ITAsMTE6ITB9O3JldHVybiBvLnByb3RvdHlwZS5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcz1mdW5jdGlvbihlKXt2YXIgdD1nZXRDb21wdXRlZFN0eWxlKGUpO2lmKHQpZm9yKHZhciBpPS91cmxcXCgoWydcIl0pPyguKj8pXFwxXFwpL2dpLG49aS5leGVjKHQuYmFja2dyb3VuZEltYWdlKTtudWxsIT09bjspe3ZhciBvPW4mJm5bMl07byYmdGhpcy5hZGRCYWNrZ3JvdW5kKG8sZSksbj1pLmV4ZWModC5iYWNrZ3JvdW5kSW1hZ2UpfX0sby5wcm90b3R5cGUuYWRkSW1hZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHIoZSk7dGhpcy5pbWFnZXMucHVzaCh0KX0sby5wcm90b3R5cGUuYWRkQmFja2dyb3VuZD1mdW5jdGlvbihlLHQpe3ZhciBpPW5ldyBzKGUsdCk7dGhpcy5pbWFnZXMucHVzaChpKX0sby5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsaSxuKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5wcm9ncmVzcyhlLGksbil9KX12YXIgdD10aGlzO3JldHVybiB0aGlzLnByb2dyZXNzZWRDb3VudD0wLHRoaXMuaGFzQW55QnJva2VuPSExLHRoaXMuaW1hZ2VzLmxlbmd0aD92b2lkIHRoaXMuaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7dC5vbmNlKFwicHJvZ3Jlc3NcIixlKSx0LmNoZWNrKCl9KTp2b2lkIHRoaXMuY29tcGxldGUoKX0sby5wcm90b3R5cGUucHJvZ3Jlc3M9ZnVuY3Rpb24oZSx0LGkpe3RoaXMucHJvZ3Jlc3NlZENvdW50KyssdGhpcy5oYXNBbnlCcm9rZW49dGhpcy5oYXNBbnlCcm9rZW58fCFlLmlzTG9hZGVkLHRoaXMuZW1pdEV2ZW50KFwicHJvZ3Jlc3NcIixbdGhpcyxlLHRdKSx0aGlzLmpxRGVmZXJyZWQmJnRoaXMuanFEZWZlcnJlZC5ub3RpZnkmJnRoaXMuanFEZWZlcnJlZC5ub3RpZnkodGhpcyxlKSx0aGlzLnByb2dyZXNzZWRDb3VudD09dGhpcy5pbWFnZXMubGVuZ3RoJiZ0aGlzLmNvbXBsZXRlKCksdGhpcy5vcHRpb25zLmRlYnVnJiZhJiZhLmxvZyhcInByb2dyZXNzOiBcIitpLGUsdCl9LG8ucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5oYXNBbnlCcm9rZW4/XCJmYWlsXCI6XCJkb25lXCI7aWYodGhpcy5pc0NvbXBsZXRlPSEwLHRoaXMuZW1pdEV2ZW50KGUsW3RoaXNdKSx0aGlzLmVtaXRFdmVudChcImFsd2F5c1wiLFt0aGlzXSksdGhpcy5qcURlZmVycmVkKXt2YXIgdD10aGlzLmhhc0FueUJyb2tlbj9cInJlamVjdFwiOlwicmVzb2x2ZVwiO3RoaXMuanFEZWZlcnJlZFt0XSh0aGlzKX19LHIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLHIucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKTtyZXR1cm4gZT92b2lkIHRoaXMuY29uZmlybSgwIT09dGhpcy5pbWcubmF0dXJhbFdpZHRoLFwibmF0dXJhbFdpZHRoXCIpOih0aGlzLnByb3h5SW1hZ2U9bmV3IEltYWdlLHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMpLHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzKSx0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMpLHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMpLHZvaWQodGhpcy5wcm94eUltYWdlLnNyYz10aGlzLmltZy5zcmMpKX0sci5wcm90b3R5cGUuZ2V0SXNJbWFnZUNvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1nLmNvbXBsZXRlJiZ0aGlzLmltZy5uYXR1cmFsV2lkdGh9LHIucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24oZSx0KXt0aGlzLmlzTG9hZGVkPWUsdGhpcy5lbWl0RXZlbnQoXCJwcm9ncmVzc1wiLFt0aGlzLHRoaXMuaW1nLHRdKX0sci5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJvblwiK2UudHlwZTt0aGlzW3RdJiZ0aGlzW3RdKGUpfSxyLnByb3RvdHlwZS5vbmxvYWQ9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpcm0oITAsXCJvbmxvYWRcIiksdGhpcy51bmJpbmRFdmVudHMoKX0sci5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbigpe3RoaXMuY29uZmlybSghMSxcIm9uZXJyb3JcIiksdGhpcy51bmJpbmRFdmVudHMoKX0sci5wcm90b3R5cGUudW5iaW5kRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5wcm94eUltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcyksdGhpcy5wcm94eUltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMpLHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcyksdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcyl9LHMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLHMucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7dGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzKSx0aGlzLmltZy5zcmM9dGhpcy51cmw7dmFyIGU9dGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKTtlJiYodGhpcy5jb25maXJtKDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgsXCJuYXR1cmFsV2lkdGhcIiksdGhpcy51bmJpbmRFdmVudHMoKSl9LHMucHJvdG90eXBlLnVuYmluZEV2ZW50cz1mdW5jdGlvbigpe3RoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcyksdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcyl9LHMucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24oZSx0KXt0aGlzLmlzTG9hZGVkPWUsdGhpcy5lbWl0RXZlbnQoXCJwcm9ncmVzc1wiLFt0aGlzLHRoaXMuZWxlbWVudCx0XSl9LG8ubWFrZUpRdWVyeVBsdWdpbj1mdW5jdGlvbih0KXt0PXR8fGUualF1ZXJ5LHQmJihoPXQsaC5mbi5pbWFnZXNMb2FkZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgaT1uZXcgbyh0aGlzLGUsdCk7cmV0dXJuIGkuanFEZWZlcnJlZC5wcm9taXNlKGgodGhpcykpfSl9LG8ubWFrZUpRdWVyeVBsdWdpbigpLG99KTsiXX0=
